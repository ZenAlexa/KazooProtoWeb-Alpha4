# Phase 3 MVP 需求定义 - 生死存亡版

**版本**: Alpha 4 - Phase 3 Kickoff
**日期**: 2025-01-11
**紧急程度**: 🔥🔥🔥 **创业项目关键节点**
**目标**: 交付可演示的 MVP,获取早期用户反馈

---

## 💀 **残酷现实分析**

### **当前状态 (Phase 2 完成后)**
✅ **技术实力**: 世界一流 (8-15ms 延迟,AudioWorklet,集中式配置)
✅ **架构优秀**: 可扩展、可配置、可测试
❌ **用户价值**: **几乎为零** - 只能哼唱听声音,无法创作/录制/分享

### **竞品对标**
| 功能 | Dubler 2 ($200) | Vochlea ($300) | **我们 (现状)** | **差距** |
|------|-----------------|----------------|----------------|---------|
| 实时音高检测 | ✅ | ✅ | ✅ | 无 |
| 多种音色 | ✅ (50+) | ✅ (100+) | ✅ (6) | **8倍差距** |
| **录音/导出** | ✅ WAV/MIDI | ✅ WAV/MIDI | ❌ | **致命缺失** |
| **DAW 集成** | ✅ VST/AU | ✅ VST/AU | ❌ | 无法进专业工作流 |
| **校准系统** | ✅ 自动 | ✅ 自动 | ❌ | 音准不稳定 |
| 价格 | $200 | $300 | **免费** | 💰 优势 |
| 平台 | 下载安装 | 下载安装 | **浏览器** | 🚀 优势 |

### **生死关键问题**
1. **用户无法保存作品** → 创作价值为零 → 用户流失
2. **无法集成 DAW** → 只是玩具,非生产工具 → 专业用户不屑
3. **音色单一** → 表现力受限 → 音乐性不足

---

## 🎯 **Phase 3 MVP 核心目标**

**定义**: 最小可行产品 (Minimum Viable Product)
**标准**: 用户能用它完成 **一次完整的音乐创作循环**

### **MVP 用户故事**
> "我是一名音乐爱好者/创作者,我想:
> 1. 用声音即兴创作一段旋律 (30秒-2分钟)
> 2. 选择合适的音色 (萨克斯/钢琴/合成器等)
> 3. **录制下来** (WAV 音频文件)
> 4. **导出** 并分享到社交媒体/发送给朋友
> 5. (可选) 导入到 GarageBand/Ableton Live 继续制作"

**如果无法完成这个循环 → MVP 失败 → 项目死亡**

---

## 📦 **Phase 3 必须交付的功能 (按优先级)**

### **P0 - 生死线功能 (不做就死)**

#### **1. 音频录制 & 导出** (2-3 天)
**用户价值**: 保存创作成果,分享作品
**技术方案**:
- 使用 `MediaRecorder` API 录制合成器输出
- 格式: WebM (浏览器原生) 或 WAV (需转换库)
- 导出: Blob → Download

**验收标准**:
- [ ] 点击"开始录音"按钮
- [ ] 哼唱 30 秒
- [ ] 点击"停止录音"
- [ ] 下载 WAV/MP3 文件
- [ ] 文件可在 iTunes/VLC 播放
- [ ] 文件大小 < 5MB (30秒)

**技术难点**:
- ✅ 简单: `MediaRecorder` 直接录制 `destination`
- ⚠️ 中等: WAV 格式转换 (需要 `lamejs` 或 `audiobuffer-to-wav`)
- ⚠️ 中等: 录音时长限制 (避免内存溢出)

**时间估算**: 2 天 (包括格式转换和 UI)

---

#### **2. 基础音色库扩展** (1-2 天)
**用户价值**: 提升音乐表现力,满足不同风格需求
**技术方案**:
- 扩展 `instrument-presets.js` (已有基础)
- 添加至少 **12 种音色** (2倍于当前)

**必须包含的音色类别**:
- **管乐**: Saxophone, Trumpet, Clarinet, Flute
- **弦乐**: Violin, Cello, Guitar (Acoustic/Electric)
- **键盘**: Piano, Electric Piano, Organ
- **合成器**: Lead Synth, Pad, Bass

**验收标准**:
- [ ] 至少 12 种音色可选择
- [ ] 每种音色有明显区别 (盲测能分辨)
- [ ] 切换音色 < 100ms 延迟
- [ ] 所有音色通过浏览器冒烟测试

**技术难点**:
- ✅ 简单: 调整 ADSR/Filter 参数
- ⚠️ 中等: 调出"像样"的音色 (需要音乐知识)
- ⚠️ 中等: 避免音色同质化

**时间估算**: 1-2 天 (调音占大部分时间)

---

### **P1 - 竞争力功能 (做了加分)**

#### **3. 简易音高校准** (2 天)
**用户价值**: 提高音准,减少误检
**技术方案**:
- 引导用户唱 3 个标准音 (C4, E4, G4)
- 记录实际检测频率 vs 标准频率
- 计算偏移量,实时校正

**验收标准**:
- [ ] 校准流程 < 30 秒
- [ ] 音准误差 < ±10 cents (可接受)
- [ ] 校准结果持久化 (LocalStorage)

**技术难点**:
- ⚠️ 中等: UI/UX 设计 (用户友好)
- ⚠️ 中等: 频率映射算法
- ✅ 简单: 数据持久化

**时间估算**: 2 天

---

#### **4. 实时视觉反馈增强** (1 天)
**用户价值**: 更好的演奏体验,辅助音准控制
**技术方案**:
- 升级现有音高曲线可视化
- 添加音符准确度指示器 (偏高/偏低/准确)
- 添加音量/亮度/气声实时显示

**验收标准**:
- [ ] 音高曲线流畅 (60 FPS)
- [ ] 音符准确度实时显示 (绿色/黄色/红色)
- [ ] Phase 2 表现力特征可视化 (亮度、气声条)

**技术难点**:
- ✅ 简单: Canvas 绘图
- ⚠️ 中等: 性能优化 (避免卡顿)

**时间估算**: 1 天

---

### **P2 - 未来扩展 (暂不实现)**

- ❌ **MIDI 导出** (技术复杂度高,用户需求不明确)
- ❌ **多音轨录音** (架构需要大改)
- ❌ **实时效果器** (Reverb/Delay/EQ) - 已有基础,Phase 4
- ❌ **云端存储** (需要后端,成本高)
- ❌ **社交分享** (需要社区运营)

---

## 📅 **Phase 3 时间表 (10 天冲刺)**

### **Week 1 (5 天) - 核心价值交付**

| 天数 | 任务 | 交付物 | 验收标准 |
|------|------|--------|---------|
| Day 1-2 | P0.1: 音频录制 & 导出 | 录音功能 + WAV 下载 | 能录制 30s 并下载 |
| Day 3-4 | P0.2: 音色库扩展 (12 种) | 新增 6 种音色 + 调优 | 盲测可区分 |
| Day 5 | 集成测试 + Bug 修复 | 浏览器冒烟测试 100% 通过 | 无崩溃/卡顿 |

### **Week 2 (5 天) - 竞争力提升**

| 天数 | 任务 | 交付物 | 验收标准 |
|------|------|--------|---------|
| Day 6-7 | P1.1: 音高校准系统 | 校准向导 + 偏移校正 | 音准误差 < ±10 cents |
| Day 8 | P1.2: 视觉反馈增强 | 音符准确度 + 表现力显示 | 60 FPS 流畅 |
| Day 9 | UI/UX 优化 + 文档 | 用户手册 + 演示视频 | 小白能用 |
| Day 10 | 部署 + 早期测试 | Vercel 生产环境 | 5 个用户反馈 |

---

## 🎬 **Demo 演示脚本 (给投资人/早期用户)**

**时长**: 2 分钟
**场景**: 创作一段即兴旋律并分享

1. **开场** (10秒)
   - "这是一个浏览器端的实时人声转乐器应用"
   - "8-15ms 超低延迟,无需下载,打开即用"

2. **演示录音** (60秒)
   - 点击"开始录音"
   - 选择萨克斯音色
   - 哼唱 30 秒旋律 (《小星星》或即兴)
   - 点击"停止录音"
   - 下载 WAV 文件

3. **演示音色切换** (20秒)
   - 切换到钢琴
   - 哼唱同一段旋律
   - 展示音色差异

4. **演示校准** (20秒)
   - 进入校准界面
   - 唱 C4, E4, G4
   - 显示音准改善前后对比

5. **结尾** (10秒)
   - "完全免费,无需注册"
   - "支持 Chrome/Firefox/Safari"
   - "立即访问: kazoo-proto.vercel.app"

---

## 🔬 **技术架构调整**

### **新增模块**

```
js/
├── recorder/
│   ├── audio-recorder.js      # MediaRecorder 封装
│   ├── format-converter.js    # WAV/MP3 转换
│   └── export-manager.js      # 下载管理
├── calibration/
│   ├── calibration-wizard.js  # 校准向导 UI
│   ├── pitch-mapper.js        # 频率映射算法
│   └── calibration-data.js    # LocalStorage 持久化
└── visualizer/
    ├── pitch-accuracy.js      # 音符准确度指示器
    └── expressive-display.js  # 表现力特征可视化
```

### **配置扩展**

```javascript
// js/config/app-config.js 新增字段
export const DEFAULT_CONFIG = {
  // ... 现有配置

  // Phase 3: 录音配置
  recorder: {
    format: 'wav',           // 'wav' | 'webm' | 'mp3'
    bitRate: 128000,         // 128 kbps
    maxDuration: 300000,     // 5 分钟 (毫秒)
    autoDownload: true       // 录音结束自动下载
  },

  // Phase 3: 校准配置
  calibration: {
    referenceNotes: ['C4', 'E4', 'G4'],  // 校准音符
    tolerance: 10,           // 音准容差 (cents)
    enabled: false           // 默认关闭 (避免强制)
  },

  // Phase 3: 可视化配置
  visualizer: {
    showPitchCurve: true,
    showAccuracy: true,
    showExpressive: true,
    fps: 60
  }
};
```

---

## ✅ **MVP 成功标准**

### **技术指标**
- [ ] 录音功能稳定性 > 99% (100 次录音 < 1 次失败)
- [ ] 音色切换延迟 < 100ms
- [ ] 录音文件大小 < 10MB (5 分钟)
- [ ] 浏览器兼容性: Chrome/Firefox/Safari

### **用户体验指标**
- [ ] 首次用户 **5 分钟内** 完成首次录音
- [ ] 早期测试用户 (10人) 满意度 > 80%
- [ ] 无严重 Bug (崩溃/数据丢失)

### **商业指标**
- [ ] 可演示给潜在投资人 (Demo 视频)
- [ ] 可发布到 Product Hunt / Hacker News
- [ ] 获取 **100 个早期用户** 注册/试用

---

## 🚨 **风险识别**

### **技术风险**
1. **MediaRecorder 兼容性问题**
   - Safari 支持有限 (仅支持 MP4)
   - 缓解: 提供多种格式选择

2. **录音内存溢出**
   - 长时间录音 (> 5 分钟) 可能崩溃
   - 缓解: 强制时长限制 + 分段录音

3. **音色质量不达预期**
   - Tone.js 合成器限制
   - 缓解: 使用采样音色 (Phase 4)

### **用户体验风险**
1. **学习曲线过高**
   - 用户不知道如何开始
   - 缓解: 引导教程 + 示例视频

2. **音准不稳定**
   - 环境噪声/麦克风质量
   - 缓解: 校准系统 + 噪声提示

---

## 📊 **Phase 3 vs Phase 4 边界**

| 功能 | Phase 3 (MVP) | Phase 4 (进阶) |
|------|---------------|----------------|
| 录音 | ✅ 单轨 WAV | 多轨混音 |
| 音色 | ✅ 12 种合成 | 采样音色库 (50+) |
| 导出 | ✅ WAV | MIDI + Stems |
| 校准 | ✅ 手动 | 自动校准 + AI 优化 |
| DAW | ❌ 无 | VST/AU 插件 |
| 效果器 | ✅ 基础 (Reverb) | 完整效果链 |

---

## 🎯 **最终目标**

**10 天后交付物**:
1. ✅ 可录音、可导出的 Web 应用
2. ✅ 12 种可用音色
3. ✅ 音高校准系统
4. ✅ 增强的可视化反馈
5. ✅ 完整的用户手册 + Demo 视频
6. ✅ 部署到生产环境 (Vercel)

**成功指标**:
- 早期用户能用它创作并分享作品
- 获得正向反馈 (音质/易用性/创新性)
- 为下一轮融资/合作提供有力 Demo

**失败标准**:
- 用户无法完成录音流程
- 音色质量被吐槽"像玩具"
- 技术故障导致作品丢失

---

**只有交付真正的用户价值,项目才有未来。**
**Phase 3 = 生死之战!**
